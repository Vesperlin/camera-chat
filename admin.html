<!doctype html>
<html lang="zh-CN">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>控制端 · CameraChat</title>
<style>
  :root{
    --bg:#0f1115;--panel:#141926;--text:#eef1f5;--sub:#94a0b2;--line:#232a3a;
    --brand:#6b8afd;--ok:#2cba7c;--danger:#a84a4a;--r:12px;
  }
  *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font:15px/1.5 -apple-system,BlinkMacSystemFont,"PingFang SC",sans-serif}
  .wrap{max-width:980px;margin:0 auto;padding:16px}
  .card{background:var(--panel);border:1px solid var(--line);border-radius:var(--r);padding:14px;margin:10px 0}
  h2{margin:0 0 10px;font-size:18px}
  input,button,textarea,select{background:#0e1220;color:var(--text);border:1px solid var(--line);border-radius:10px;padding:8px 10px}
  button{background:var(--brand);border:0}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .ok{background:var(--ok)}
  .danger{background:var(--danger)}
  #feed{height:48vh;overflow:auto;display:flex;flex-direction:column;gap:8px}
  .msg{border:1px solid var(--line);border-radius:10px;padding:8px}
  .msg small{color:var(--sub)}
  .msg img{display:block;max-width:520px;width:56%;border-radius:8px;border:1px solid var(--line);margin-top:6px}
  .mono{font-family:ui-monospace,Menlo,Consolas,monospace}
</style>

<div class="wrap">
  <div class="card">
    <h2>房间与分发</h2>
    <div class="row">
      <label>房间ID</label>
      <input id="room" class="mono" placeholder="如 vesper1" style="min-width:160px">
      <button id="create">创建/切换</button>
      <label class="row"><input id="ocr" type="checkbox"> 开启 AI OCR（写入 rooms.ocr_enabled）</label>
      <button id="saveRoom" class="ok">保存</button>
    </div>
    <div style="margin-top:10px">
      <div>角色B链接（发给对方）：</div>
      <input id="bLink" class="mono" readonly style="width:100%;margin-top:6px">
      <div class="row" style="margin-top:8px">
        <button id="copyB">复制链接</button>
        <button id="openB">新窗口打开测试</button>
      </div>
      <p style="color:var(--sub);margin-top:8px">说明：角色A是你的 Pythonista App；B 用网页端；两者进入同一房间即可互通。</p>
    </div>
  </div>

  <div class="card">
    <h2>模板管理（发给当前房间）</h2>
    <div class="row">
      <textarea id="tpl" rows="3" style="flex:1" placeholder="每行一个模板，如：\n[状态] 我已到达\n[系统] 已上传"></textarea>
      <button id="sendTpl">发送所选模板</button>
    </div>
    <div style="margin-top:6px;color:var(--sub)">从下方历史里挑选文本或图片消息也可二次发送</div>
  </div>

  <div class="card">
    <h2>实时监控 · 历史</h2>
    <div id="feed"></div>
  </div>
</div>

<script type="module" src="admin.js"></script>
</html>
